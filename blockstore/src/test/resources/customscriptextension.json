{
  "properties": {
    "template": {
      "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0",
      "parameters": {
        "newStorageAccountName": {
          "type":"string",
          "metadata": {
            "description":"Name of the Storage Account"
          }
        },
        "storageAccountType": {
          "type":"string",
          "defaultValue":"Standard_LRS",
          "allowedValues": [
            "Standard_LRS","Standard_GRS","Standard_ZRS"
          ],
          "metadata": {
            "description": "Storage Account type"
          }
        },
        "location": {
          "type": "string",
          "allowedValues": [
            "East US",
            "West US",
            "West Europe",
            "East Asia",
            "Southeast Asia"
          ],
          "metadata": {
            "description": "Location of storage accoun"
          }
        }
      },
      "variables": {  },
      "resources": [
        {
          "type":"Microsoft.Compute/virtualMachines/extensions",
          "name":"[concat(variables('vmName'),'/InitialiseDisks')]",
          "apiVersion":"api-version=2016-04-30-preview",
          "location":"[resourceGroup().location]",
          "dependsOn":[
            "[concat('Microsoft.Compute/virtualMachines/', variables('vmName'))]"
          ],
          "properties":{
            "publisher":"Microsoft.Compute",
            "type":"CustomScriptExtension",
            "typeHandlerVersion":"1.2",
            "settings":{
              "fileUris":[
                "https://ampdisks427.file.core.windows.net/initialize-disk/initialize-disk.ps1"
              ],
              "commandToExecute": "powershell -ExecutionPolicy Unrestricted -file initialize-disk.ps1"
            }
          }
        }
      ],
      "outputs": {  }
    }
  }
}